<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>è¯„è®ºåŒºï¼š{{ watchlist_name }} </title>
</head>
<body>
    <h1>ğŸ“‹ {{ watchlist_name }} çš„è¯„è®º </h1>
    <a href="/welcome">â† è¿”å›ä¸»é¡µ</a>
    <hr>

    <!-- æ˜¾ç¤ºè¯„è®º -->
    {% for comment in comments %}
        <div style="border:1px solid #ccc; padding:10px; margin-bottom:10px;">
            <strong>{{ comment[2] }}</strong> ğŸ•’ {{ comment[4] }}<br>
            {{ comment[3] }}
            {% if comment[1] == current_user_id or is_creator %}
                <form action="{{ url_for('delete_comment', comment_id=comment[0]) }}" method="post" style="display:inline;">
                    <button type="submit" style="color:red;">åˆ é™¤</button>
                </form>
            {% endif %}
        </div>
    {% else %}
        <p>æš‚æ— è¯„è®ºã€‚</p>
    {% endfor %}

    <hr>
    <!-- æ·»åŠ æˆ–æ›´æ–°è¯„è®º -->
        <h3>{{ my_comment and "âœï¸ ç¼–è¾‘ä½ çš„è¯„è®º" or "ğŸ“ å‘è¡¨ä½ çš„è¯„è®º" }}</h3>
        <form method="post" action="{{ url_for('submit_comment') }}">
            <input type="hidden" name="owner_id" value="{{ owner_id }}">
            <input type="hidden" name="watchlist_name" value="{{ watchlist_name }}">
            <textarea name="text" rows="4" cols="60" maxlength="4000" required>{{ my_comment[1] if my_comment else '' }}</textarea><br>
            <button type="submit">æäº¤</button>
        </form>
</body>
<script>
    const commentsData = {{ comments | tojson }};
    console.log("ğŸ“ å½“å‰è¯„è®ºæ•°æ®ï¼š", commentsData);
</script>

</html>
