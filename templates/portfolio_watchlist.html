<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>üìä My Portfolio & Watchlist</title>
</head>
<body>
    <h1>Welcome back, {{ current_user }}</h1>
    <a href="/welcome">‚Üê Back to Home</a> | <a href="/logout">Log Out</a>

    <hr>

    <h2>üìà My Portfolios</h2>
    {% if portfolios %}
        {% for pname, cashbalance in portfolios %}
            <h3>Portfolio: {{ pname }} (üí∞ {{ cashbalance }})</h3>
            {% if portfolio_holdings[pname] %}
                <table border="1" cellpadding="5">
                    <tr>
                        <th>Stock Symbol</th>
                        <th>Company Name</th>
                        <th>Quantity Held</th>
                        <th>Buy Price</th>
                        <th>Added Time</th>
                    </tr>
                    {% for row in portfolio_holdings[pname] %}
                    <tr>
                        <td>{{ row[0] }}</td>
                        <td>{{ row[1] or "N/A" }}</td>
                        <td>{{ row[2] }}</td>
                        <td>{{ row[3] }}</td>
                        <td>{{ row[4] }}</td>
                    </tr>
                    {% endfor %}
                </table>
            {% else %}
                <p>This portfolio is empty.</p>
            {% endif %}
        {% endfor %}
    {% else %}
        <p>You have no portfolios yet.</p>
    {% endif %}

    <hr>

    <h2>‚≠ê My Watchlists</h2>
    {% if watchlists %}
        {% for sname in watchlists %}
            <h3>Watchlist: {{ sname }}</h3>
            {% if watchlist_holdings[sname] %}
                <table border="1" cellpadding="5">
                    <tr>
                        <th>Stock Symbol</th>
                        <th>Company Name</th>
                    </tr>
                    {% for row in watchlist_holdings[sname] %}
                    <tr>
                        <td>{{ row[0] }}</td>
                        <td>{{ row[1] or "N/A" }}</td>
                    </tr>
                    {% endfor %}
                </table>
            {% else %}
                <p>This watchlist is empty.</p>
            {% endif %}
        {% endfor %}
    {% else %}
        <p>You have not created any watchlists yet.</p>
    {% endif %}
</body>
</html>
